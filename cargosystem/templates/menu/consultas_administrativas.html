{% load filtros %}

<style>
  .custom-icon {
    fill: white; /* Cambia el color del SVG a blanco */
        width: 1em; /* Ajusta al tamaño del icono de Font Awesome */
    height: 1em;
  }

/* Estilo inicial: Submenu links y sidebar links con colores normales */
.sidebar-link, .submenu-link {
    color: white;
    text-decoration: none;
}

/* Submenu oculto inicialmente */
.submenu {
    color: white;
    max-height: 0; /* Altura inicial cero para ocultar */
    overflow: hidden; /* Evitar mostrar contenido desbordado */
    transition: max-height 0.4s ease-in-out; /* Animación de altura */
}

/* Mostrar el submenú cuando se hace hover sobre el sidebar-link */
.sidebar-item.has-submenu:hover .submenu {
    color: white;
    max-height: 500px; /* Altura suficiente para mostrar los enlaces del submenú */
}

/* Cambiar el color de los submenu-link a blanco solo cuando se hace hover sobre el sidebar-link */
.sidebar-item.has-submenu:hover .submenu-link {
    color: white;
}

/* Cambiar también el color del sidebar-link y el ícono a blanco al hacer hover */
.sidebar-item.has-submenu:hover .sidebar-link,
.sidebar-item.has-submenu:hover .custom-icon {
    color: white;
    fill: white;
}

/* Efecto hover en los submenu-link: oscurecer un poco */
.sidebar-item.has-submenu:hover .submenu-link:hover {
    color: #cccccc; /* Un tono de blanco más oscuro para resaltar el hover */
}
</style>


<aside id="sidebar" class="bg-secondary">
    <div class="h-100">
        <div class="sidebar-logo">
            <a href="/">{{ request.session.empresa }}</a>
        </div>
        <!-- Sidebar Navigation -->
        <ul class="sidebar-nav">
            <li class="sidebar-header">
                Opciones
            </li>

        <li class="sidebar-item has-submenu">
            <a href="" class="sidebar-link">
                <i class="fa-solid fa-cart-shopping"></i> &nbsp;Ventas
            </a>
            <ul class="submenu">
                    <li class="submenu-item">
                        <a href="/consultas_administrativas/subdiario_ventas/" class="submenu-link">
                            Subdiario de Ventas
                        </a>
                    </li>
                    <li class="submenu-item">
                        <a href="/consultas_administrativas/balance_cobrar/" class="submenu-link">
                            Balance cobranza
                        </a>
                    </li>
                    <li class="submenu-item">
                        <a href="/consultas_administrativas/reporte_cobranzas/" class="submenu-link">
                            Reporte cobranzas
                        </a>
                    </li>
            </ul>
        </li>
        <li class="sidebar-item">
            <a href="/consultas_administrativas/compras/" class="sidebar-link">
                <i class="fa-solid fa-shopping-basket"></i> &nbsp;Compras
            </a>
        </li>
        <li class="sidebar-item">
            <a href="/consultas_administrativas/agentes_mixtas/" class="sidebar-link">
                <i class="fa-solid fa-user-tie"></i> &nbsp;Agentes y Mixtas
            </a>
        </li>
        <li class="sidebar-item">
            <a href="/consultas_administrativas/contabilidad/" class="sidebar-link">
                <i class="fa-solid fa-calculator"></i> &nbsp;Contabilidad
            </a>
        </li>
        <li class="sidebar-item">
            <a href="/consultas_administrativas/cargas/" class="sidebar-link">
                <i class="fa-solid fa-boxes-stacked"></i> &nbsp;Cargas
            </a>
        </li>


            <li class="sidebar-header">
                Modulo
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-bs-toggle="collapse" onclick="toggle_collapse_menu('auth1', this)" >
                    <i class="fa fa-puzzle-piece pe-2"></i>
                    {{ request.session.rol|filtro_menu|capfirst }}
                </a>
                <ul id="auth1" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                   {% for modulo in request.session.roles %}
                        {% if modulo != request.session.rol %}
                            <li class="sidebar-item">
                                <a href="{% url 'vista_cambiar_modulo' modulo %}" class="sidebar-link">{{ modulo|capfirst|filtro_menu }}</a>
                            </li>
                        {% endif %}
                   {% endfor %}
                </ul>
            </li>
             <li class="sidebar-header">
                Sesion usuario
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link collapsed" data-bs-toggle="collapse" data-bs-target="#auth"
                    aria-expanded="false" aria-controls="auth">
                    <i class="fa-regular fa-user pe-2"></i>
                    {{ request.user.first_name }} {{ request.user.last_name }}
                </a>
                <ul id="auth" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">Cambio clave</a>
                    </li>
                    <li class="sidebar-item">
                        <a href="{% url 'vista_logout' %}" class="sidebar-link">Salir</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</aside>
